# Epic 5 Retrospective: Encoding & Decoding Tools

**Date:** 2026-02-14
**Facilitator:** Bob (Scrum Master)
**Epic Status:** Complete — 2/2 stories done

## Team Participants

- Bob (Scrum Master) — Facilitator
- Alice (Product Owner) — Product perspective
- Charlie (Senior Dev) — Technical leadership
- Dana (QA Engineer) — Quality perspective
- Elena (Junior Dev) — Fresh eyes perspective
- csrteam (Project Lead) — Overall direction

## Epic Summary & Metrics

**Delivery:**

- Stories completed: 2/2 (100%)
- Velocity: Both stories completed in a single session
- Scope changes: 0
- Production incidents: 0

**Quality:**

- Tests added: 45 new tests (25 URL + 20 JWT)
- Total automated tests: 344 (299 unit at start → 344 at end)
- Code review issues caught: 9 across 2 stories (2 in 5-1, 7 in 5-2)
- Debug issues: 1 (Story 5-1 vitest import — self-resolved)
- Technical debt introduced: 0

**Stories Delivered:**

| Story | Title | Debug Issues | Review Fixes | Files Created | Files Modified |
|-------|-------|-------------|-------------|---------------|----------------|
| 5-1 | URL Encoder/Decoder | 1 | 2 | 3 | 8 |
| 5-2 | JWT Decoder | 0 | 7 | 3 | 5 |

**FRs Delivered:**

- FR9: URL encode/decode — complete
- FR10: JWT token decoding — complete

**Tools Added:**

- URL Encoder/Decoder (registry key: `url-encoder-decoder`)
- JWT Decoder (registry key: `jwt-decoder`)
- Registry now has 8 tools (up from 6)

## Previous Retro Follow-Through (Epic 4)

| # | Action Item | Owner | Status | Notes |
|---|-------------|-------|--------|-------|
| 1 | Embed knowledge transfer into story workflow | Bob | ⏳ Partial | "Previous Story Intelligence" used in 5-2 but gotchas not extracted to contributor docs |
| 2 | Extra review scrutiny for infrastructure stories | Bob | ✅ N/A | Epic 5 was tool stories, not infrastructure |
| 3 | ~~Update architecture.md~~ | Winston | ✅ Done | Completed during Epic 4 retro |
| 4 | Add E2E Common Gotchas to CONTRIBUTING.md | Amelia | ❌ Not Addressed | Embedded into Epic 6 story going forward |
| 5 | Audit type="number" silent-drop (from Epic 3) | Amelia | ❌ Not Addressed | Embedded into Epic 6 story going forward |
| 6 | Integrate isValidLayoutValue at runtime (from Epic 3) | Amelia | ❌ DROPPED | Carried 3 epics with zero impact — dropped by team decision |

**Pattern confirmed for third consecutive epic:** "If it's not in a story, it doesn't get done." Process change adopted: all retro action items must be embedded into stories.

## What Went Well

- **Cross-story learning is a proven accelerator** — Story 5-2's "Previous Story Intelligence" section explicitly referenced 5-1's mistakes (vitest imports, pre-render route, error message differentiation). Result: zero debug issues in 5-2.
- **Pattern compounding** — EncodingBase64 dialog pattern held perfectly for both tools. No UI invention needed — just follow the pattern.
- **Code review catching real issues** — 9 findings across 2 stories including a HIGH severity data integrity bug (CopyButton copying invalid JSON with timestamp annotations).
- **Zero scope creep, zero blockers, zero tech debt** — third consecutive clean epic.
- **Test growth** — 45 new tests (25 URL + 20 JWT) bringing total to 344. Solid coverage for new tools.
- **Fast velocity** — both stories completed in a single session with Story 5-2 showing measurable improvement over 5-1.

## What Didn't Go Well

- **Display/data conflation (HIGH severity)** — Story 5-2's CopyButton was copying formatted display strings (with `//` timestamp annotations) instead of clean JSON data. Users would have pasted broken JSON into their code. Root cause: single string used for both rendering and clipboard. Fix: separate display value from copy value.
- **Unsafe type assertions** — Story 5-2 defaulted to `as Record<string, unknown>` casts instead of runtime validation. Non-object JSON values (arrays, strings) would have silently passed through as "valid" decodes. Fix: added `isPlainObject` runtime check.
- **Pre-render route missed in Story 5-1** — SEO gap caught in code review. Not repeated in 5-2 (cross-story learning worked).
- **3 of 6 Epic 4 action items unaddressed** — third consecutive epic confirming standalone tasks don't get done.

## Key Insights

1. **Cross-story learning is a proven accelerator** — "Previous Story Intelligence" eliminated debug issues. Formalize as required story section.
2. **"If it's not in a story, it doesn't get done"** — confirmed for three consecutive epics. Process change adopted: embed all action items in stories.
3. **Separate display values from copy values** — HIGH severity lesson. Any component with CopyButton must maintain separate data for display rendering vs clipboard operations.
4. **Runtime validation at parse boundaries** — don't use `as` casts on external input. Validate the shape of parsed data at the boundary where it enters the system.
5. **Code review is high-value** — Story 5-2's review caught 7 issues including a HIGH. Without review, broken copy-paste behavior would have shipped.

## Action Items

### Process Improvements

| # | Action | Owner | Priority | Success Criteria |
|---|--------|-------|----------|-----------------|
| 1 | Embed retro action items into stories — no standalone commitments | Bob (Scrum Master) | HIGH | Zero orphaned action items after any future retro |
| 2 | Formalize "Previous Story Intelligence" as required story section | Bob (Scrum Master) | MEDIUM | Every story after the first in an epic includes Previous Story Intelligence |

### Technical Patterns (embed in Epic 6 story dev notes)

| # | Action | Owner | Priority | Success Criteria |
|---|--------|-------|----------|-----------------|
| 3 | Separate display values from copy values in all CopyButton usage | Amelia (Dev) | HIGH | No component passes formatted display strings to CopyButton |
| 4 | Runtime validation at parse boundaries — no unsafe `as` casts on external input | Amelia (Dev) | MEDIUM | Code review checklist includes "no `as` casts on parsed external data" |

### Carried Items (embedded in Epic 6 stories)

| # | Action | Owner | Priority | Success Criteria |
|---|--------|-------|----------|-----------------|
| 5 | Add E2E Common Gotchas to CONTRIBUTING.md | Amelia (Dev) | MEDIUM | CONTRIBUTING.md Testing section has gotchas subsection |
| 6 | Audit remaining tools for type="number" silent-drop | Amelia (Dev) | MEDIUM | All numeric inputs verified; type="number" switched to type="text" where needed |

### Dropped

| # | Action | Reason |
|---|--------|--------|
| 7 | ~~Integrate isValidLayoutValue at runtime~~ | Carried 3 epics with zero observed impact — dropped by team decision |

### Team Agreements

**Continued:**

- Scope discipline — no creep without PO approval
- `import type` consistency
- Pure function testing strategy
- Documentation tasks done during the story that creates the drift

**New:**

- Retro action items MUST be embedded in stories — standalone commitments are not allowed
- "Previous Story Intelligence" section required in every story after the first in an epic
- Separate display values from copy values — never pass formatted strings to CopyButton
- Validate parsed external data at runtime — no `as` casts at parse boundaries

## Epic 6 Preparation

### Critical (before Epic 6 starts)

- [ ] YAML library selection and evaluation (bundle size, ESM, tree-shaking, license) — Owner: Charlie
- [ ] CSV approach decision (hand-roll vs library, RFC 4180 compliance) — Owner: Charlie
- [ ] Lazy-loading pattern for processing libraries (dynamic import in debounced callback) — Owner: Charlie

### Parallel (can happen during early stories)

- [ ] JSON syntax highlighting approach (recommend hand-rolled tokenizer) — Owner: Elena
- [ ] Embed E2E gotchas into first story with E2E testing (Action Item 5)
- [ ] Embed type="number" audit into first story touching form inputs (Action Item 6)

## Next Epic Preview: Epic 6 — Data & Format Tools

**Stories:** 3 (JSON Formatter/Validator, JSON↔YAML Converter, JSON↔CSV Converter)
**FRs covered:** FR17, FR18, FR19

**Dependencies on Epic 5:**

- None — Epic 6 depends on Epic 1 and 2 (both complete)

**Key Differences from Epic 5:**

- Story 6-2 requires first external processing dependency (YAML library)
- Story 6-3 involves complex parsing logic (CSV edge cases)
- Story 6-1 is straightforward (native JSON.parse/JSON.stringify)
- New async boundary: dynamic import of processing libraries inside debounced callbacks

**No significant discoveries requiring Epic 6 plan changes.** Lessons from Epic 5 (display/data separation, runtime validation) directly strengthen Epic 6 implementation.

## Readiness Assessment

- Testing & Quality: ✅ 344 tests passing, CI validates automatically
- Deployment: ✅ Static site, no deployment concerns
- Stakeholder Acceptance: ✅ Approved by Project Lead
- Technical Health: ✅ Stable — zero tech debt introduced in Epic 5
- Unresolved Blockers: ✅ None
- Epic 6 Readiness: ⏳ Pending library research and lazy-load pattern establishment
