# Epic 8 Retrospective: Generator Tools

**Date:** 2026-02-15
**Facilitator:** Bob (Scrum Master)
**Epic Status:** Complete — 3/3 stories done

## Team Participants

- Bob (Scrum Master) — Facilitator
- Alice (Product Owner) — Product perspective
- Charlie (Senior Dev) — Technical leadership
- Dana (QA Engineer) — Quality perspective
- Elena (Junior Dev) — Fresh eyes perspective
- csrteam (Project Lead) — Overall direction

## Epic Summary & Metrics

**Delivery:**

- Stories completed: 3/3 (100%)
- Velocity: All stories completed in single sessions each
- Scope changes: 0
- Production incidents: 0

**Quality:**

- Tests added: 38 new tests (11 UUID + 14+1 password + 12 hash)
- Total automated tests: 505 (467 at start → 505 at end)
- Code review findings: ~13 across 3 stories (2H + 2M + 3L formal + ~4 informal)
- Debug issues: 2 (8-1: TextInput type pass-through, 8-3: js-md5 import syntax + name prop)
- Technical debt introduced: 2 LOW items (dead error JSX, explicit vitest imports — both by design)
- New dependency: 1 (`js-md5@0.8.3` — dynamically imported, code-split)

**Stories Delivered:**

| Story | Title | Debug Issues | Review Fixes | Files Created | Files Modified |
|-------|-------|-------------|-------------|---------------|----------------|
| 8-1 | UUID Generator | 1 | 5 (2M, 3L) | 4 | 8 |
| 8-2 | Password Generator | 0 | ~4 | 4 | 10 |
| 8-3 | Hash Generator | 1 | 4 (2H, 1M, 1L) | 3 | 7 |

**FRs Delivered:**

- FR22: UUID generation (single and bulk) — complete
- FR23: Password generation with configurable length and character types — complete
- FR24: Hash generation (MD5, SHA-1, SHA-256, SHA-512) — complete

**Tools Added:**

- UUID Generator (registry key: `uuid-generator`, chunk: 1.78 kB)
- Password Generator (registry key: `password-generator`, chunk: 3.08 kB)
- Hash Generator (registry key: `hash-generator`, chunk: 2.72 kB + js-md5: 10.72 kB lazy)
- Registry now has 16 tools (up from 13)
- New tool category created: Generator

**Reusable Components Created:**

- RangeInput (`src/components/common/input/RangeInput.tsx`) — range slider + number input combo, integrated into FieldForm via InputController

## Previous Retro Follow-Through (Epic 7)

| # | Action Item | Owner | Status | Notes |
|---|-------------|-------|--------|-------|
| 1 | Add WCAG accessibility checklist to task completion criteria | Bob (SM) | ⏳ Partial | 8-3 built accessibility in (aria-pressed). 8-2 still caught aria-label in review. Checklist not formally embedded in story template. |
| 2 | Add "verify theme token usage" to code review checklist | Bob (SM) | ✅ Applied | Zero theme token violations across all 3 Epic 8 stories. |
| 3 | Document sync vs async processing pattern decision tree | Bob (SM) | ✅ Applied | All 3 stories explicitly document pattern choice and rationale. 8-1/8-2 sync, 8-3 async — all correct. |
| 4 | FORCE-EMBED E2E Common Gotchas in Epic 8 Story 1 | Bob (SM) | ❌ Not Addressed | **CARRIED 5TH EPIC** — first flagged Epic 4. Not embedded in any Epic 8 story. **PERMANENTLY DROPPED this retro.** |
| 5 | FORCE-EMBED type="number" audit in Epic 8 Story 1 | Bob (SM) | ⏳ Partial | Root cause found and fixed in 8-1 (TextInput type pass-through fix). But no formal audit conducted. **PERMANENTLY DROPPED this retro** — systemic fix makes per-tool audit moot. |

**Pattern confirmed for sixth consecutive epic:** Items not embedded in stories don't get done. Items 4 and 5 survived 4-5 retros. The only items that succeed are those integrated into existing workflow (code review catches, dev notes documentation).

## What Went Well

- **Sixth consecutive clean epic** — Zero scope creep, zero blockers, 100% delivery across Epics 3 through 8. This is a deeply stable pattern.
- **RangeInput reusable component emerged from implementation** — Story 8-2 needed a slider+input combo for password length. Instead of designing a component up front, it was extracted from a working implementation and retroactively applied to 8-1's count input. Available for Epic 9 Box Shadow sliders.
- **TextInput type pass-through fix (8-1)** — Discovered that `TextInput.tsx` hardcoded `type="text"`, making `type="number"` min/max props inert and blocking mobile numeric keyboards. Fix benefits all current and future tools.
- **Pattern decision tree proven across 3 stories** — 8-1 and 8-2 correctly identified synchronous processing (native crypto APIs). 8-3 correctly identified async processing (crypto.subtle.digest + dynamic import). The sync/async decision tree documented in Epic 7's retro is working.
- **Theme token compliance — zero violations** — Action item from Epic 7 fully applied. No hardcoded color values in any Epic 8 story.
- **Smart default pattern reinforced** — UUID pre-generates on mount, Password pre-generates on mount, Hash shows em dash placeholder. Immediate value on load is now a standard UX pattern.
- **Test growth continues strong** — 38 new tests (467 → 505). Known hash test vectors in 8-3 verify against published standards, not just "output exists."
- **Cross-story learning accelerating** — 8-2 reused 8-1's inline layout. 8-3 reused FlagToggle pattern from 8-2 and 7-2. Previous Story Intelligence sections eliminated pattern confusion.

## What Didn't Go Well

- **Async debounce race conditions (2 HIGH findings in 8-3)** — The debounced callback closed over `algorithm` from render scope. When user switched algorithms while debounce was pending, stale algorithm produced wrong hash. Similarly, clearing input while debounce was pending showed a hash for old text. `sessionRef` alone was insufficient — needed `algorithmRef` and `textRef` guards. This is a NEW risk pattern not seen in previous epics.
- **Accessibility still reactive for 8-2** — Despite Epic 7's action item to make accessibility a build-time checklist, Story 8-2 still caught a missing `aria-label` during code review. The checklist was agreed to but never formally embedded in the story template.
- **Carried items accountability failure reached 5 epics** — E2E Common Gotchas and type="number" audit both failed to get addressed despite explicit "FORCE-EMBED" commitment in Epic 7's retro. The system of "agree in retro, carry forward" is broken. Items must either be embedded in a specific story subtask or permanently dropped.
- **Error clearing pattern missed in 8-3** — `clearError` was not destructured from `useToolError()`. After an error, subsequent successful computations wouldn't clear the error display. Inconsistent with RegexTester pattern.

## Key Insights

1. **Async debounce with multiple trigger sources is a distinct risk category** — Sync tools (8-1, 8-2) had zero HIGH findings. The async tool (8-3) had 2 HIGH findings. The difference: async debounced callbacks can close over stale state from multiple sources (text AND algorithm). `sessionRef` prevents stale results from the SAME trigger but not from DIFFERENT triggers firing in sequence. Mitigation: use `ref` for every value that might change between debounce schedule and execution.
2. **Reusable components should be extracted, not designed** — RangeInput was built for PasswordGenerator, then generalized and applied to UuidGenerator. This bottom-up approach (build → extract → reuse) produces better components than top-down design because they're proven in a real context before generalization.
3. **Action items succeed when integrated into workflow, fail when standalone** — Theme token compliance (integrated into code review) and pattern decision tree (integrated into dev notes) both succeeded. WCAG checklist (standalone agreement) and carried items (standalone tasks) both failed. The mechanism matters more than the commitment.
4. **Permanently drop carried items after 3 epics** — The "carry and hope" strategy is proven broken across 5 epics. New policy: after 3 epics without action, items are permanently dropped. If they matter enough, create a new story.
5. **Code review finding severity correlates with processing complexity** — Epic 7: 1H in 9 findings. Epic 8: 2H in ~13 findings. All HIGH findings involve async state management. Sync tools consistently ship clean.
6. **TextInput type pass-through was a hidden systemic bug** — The fix in 8-1 affected every `FieldForm type="number"` in the app. Bugs that affect shared infrastructure have outsized positive impact when fixed.

## Action Items

### Process Improvements

| # | Action | Owner | Priority | Success Criteria |
|---|--------|-------|----------|-----------------|
| 1 | Add async debounce safety pattern to story dev notes: `ref` guards for every variable that might change between schedule and execution | Bob (SM) | HIGH | Zero race condition findings in Epic 9 code review |
| 2 | Embed WCAG accessibility checklist as mandatory subtask in story template (not just retro agreement) | Bob (SM) | HIGH | Accessibility attributes present before code review for all Epic 9 stories |

### Permanently Dropped Items

| # | Item | Epics Carried | Reason for Drop |
|---|------|---------------|-----------------|
| 3 | E2E Common Gotchas in CONTRIBUTING.md | 5 (Epics 4-8) | E2E test patterns evolved since Epic 4. Gotchas may be outdated. If needed, create fresh story when E2E infrastructure is next touched. |
| 4 | Audit remaining tools for type="number" silent-drop | 5 (Epics 4-8) | Root cause fixed systemically in Story 8-1 (TextInput type pass-through). All FieldForm type="number" now works correctly. Per-tool audit is moot. |

### Technical Patterns (embed in Epic 9 story dev notes)

| # | Pattern | Apply When |
|---|---------|------------|
| 5 | Async debounce safety: `triggerRef` + `inputRef` guards alongside `sessionRef` | Tools with debounced async processing AND multiple trigger sources |
| 6 | RangeInput component (`FieldForm type="range"`) for slider + number input | Epic 9 Box Shadow sliders (offset, blur, spread, alpha) |
| 7 | WCAG attributes checklist: `role`, `aria-label`, `aria-live="polite"`, `aria-pressed` | Every tool's output rendering and interactive controls |
| 8 | New category setup: ToolCategory union + CATEGORY_ORDER + feature barrel | Epic 9 creates 'CSS' category |

### Team Agreements

**Continued:**

- Scope discipline — no creep without PO approval
- `import type` consistency
- Pure function testing strategy
- Documentation tasks done during the story that creates the drift
- Retro action items MUST be embedded in stories — standalone commitments are not allowed
- "Previous Story Intelligence" section required in every story after the first in an epic
- Separate display values from copy values — never pass formatted strings to CopyButton
- Validate parsed external data at runtime — no `as` casts at parse boundaries
- Test assertions must be specific (not `toBeTruthy` or bare `toThrow()`)
- WCAG accessibility attributes are a build-time checklist item, not a review catch
- Theme tokens MUST be used for all color values — hardcoded Tailwind colors are not acceptable
- File List in story records must include ALL modified files, even formatting-only changes

**New:**

- Async debounce with multiple triggers requires `ref` guards beyond `sessionRef` — mandatory for all future async+debounce tools
- Carried items get **3 epics maximum, then permanently drop** — no "force-embed" promises, no exceptions. If it matters, create a story.
- Items 3 and 4 are permanently dropped effective this retrospective

## Epic 9 Preparation

### Parallel (can happen during early development)

- [ ] Verify RangeInput supports negative values (box-shadow offsets can be negative) — Owner: Charlie
- [ ] Research native `<input type="color">` API and hex/rgba conversion — Owner: Elena

## Next Epic Preview: Epic 9 — CSS Visual Tools

**Stories:** 1 (CSS Box Shadow Generator)
**FRs covered:** FR25

**Dependencies on Epic 8:**

- None — Epic 9 depends on Epic 1 and 2 (both complete)
- RangeInput from 8-2 is an accelerator, not a dependency

**Key Characteristics:**

- New category: CSS (same setup pattern as Generator in 8-1, Text in 7-1)
- Slider-heavy UI: h-offset, v-offset, blur, spread, alpha — all RangeInput candidates
- Live preview: real-time DOM style manipulation with 150ms debounce (Hash Generator pattern)
- Color input: new input type — `<input type="color">` not used in previous epics
- CSS string output: deterministic text from slider values
- Single story epic — smallest epic since Epic 5

**No significant discoveries requiring Epic 9 plan changes.** Lessons from Epic 8 (async debounce safety, accessibility checklist, RangeInput reuse) directly strengthen Epic 9 implementation.

## Readiness Assessment

- Testing & Quality: ✅ 505 tests passing, CI validates automatically
- Deployment: ✅ Static site, no deployment concerns
- Stakeholder Acceptance: ✅ All 3 FRs delivered per spec
- Technical Health: ✅ Stable — 2 LOW items are by design (dead error JSX, explicit vitest imports)
- Unresolved Blockers: ✅ None
- New Dependency: ✅ js-md5@0.8.3 — lazy-loaded, zero initial bundle impact
- Epic 9 Readiness: ✅ Zero blocking dependencies, RangeInput ready, patterns documented
